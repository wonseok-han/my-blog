---
title: 'npm íŒ¨í‚¤ì§€ ë°°í¬í•˜ê¸°: ì˜ì¡´ì„± ì—†ëŠ” ê°€ë²¼ìš´ CLI ë„êµ¬ ë§Œë“¤ê¸° (feat. indexgen-cli)'
description: 'ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—†ì´ Node.js ë‚´ì¥ ê¸°ëŠ¥ë§Œìœ¼ë¡œ ë‚˜ë§Œì˜ CLI ë„êµ¬ë¥¼ ë§Œë“¤ê³ , npmì— ë°°í¬í•˜ì—¬ ëˆ„êµ¬ë‚˜ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë§Œë“œëŠ” ê³¼ì •ì„ ê³µìœ í•©ë‹ˆë‹¤.'
thumbnail: '/thumbnail/blog-posts/14-npm-package-ë°°í¬í•˜ê¸°.png'
category: 'Development'
tags: ['npm', 'CLI', 'TypeScript', 'Node.js', 'Deploy']
---

# Overview

ê°œë°œì„ í•˜ë‹¤ ë³´ë©´ ë§¤ë²ˆ ë°˜ë³µë˜ëŠ” ì‘ì—…ë“¤ì´ ìˆë‹¤. ë‚´ ê²½ìš°ì—ëŠ” í´ë” ë‚´ì˜ íŒŒì¼ë“¤ì„ ìŠ¤ìº”í•´ì„œ `index.ts` íŒŒì¼ì„ ìƒì„±í•˜ê³  export ë¬¸ì„ ì‘ì„±í•˜ëŠ” ì‘ì—…ì´ ê·¸ë¬ë‹¤. ì´ ê·€ì°®ìŒì„ í•´ê²°í•˜ê¸° ìœ„í•´ **[indexgen-cli](https://github.com/wonseok-han/indexgen-cli)** ë¼ëŠ” CLI ë„êµ¬ë¥¼ ë§Œë“¤ì—ˆë‹¤.

ì´ ê¸€ì—ì„œëŠ” ë¶ˆí•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—†ì´, **TypeScriptì™€ Node.js ë‚´ì¥ ëª¨ë“ˆë§Œìœ¼ë¡œ** ê°€ë²¼ìš´ CLI íŒ¨í‚¤ì§€ë¥¼ ë§Œë“¤ê³  ë°°í¬í•˜ëŠ” ê³¼ì •ì„ ê³µìœ í•œë‹¤.

<br />
<br />

# ì‚¬ì „ ì¤€ë¹„

## npm ê³„ì • ë° ë¡œê·¸ì¸

ë°°í¬ë¥¼ ìœ„í•´ì„œëŠ” npm ê³„ì •ì´ í•„ìš”í•˜ë‹¤. ê³„ì •ì´ ì—†ë‹¤ë©´ [npmjs.com](https://www.npmjs.com/)ì—ì„œ ìƒì„± í›„ í„°ë¯¸ë„ì—ì„œ ë¡œê·¸ì¸í•œë‹¤.

```bash
npm login
npm whoami # ë¡œê·¸ì¸ í™•ì¸
```

<br />
<br />

# í”„ë¡œì íŠ¸ ì„¤ì •

## í”„ë¡œì íŠ¸ ìƒì„±

```bash
mkdir indexgen-cli
cd indexgen-cli
npm init -y
```

## TypeScript ì„¤ì¹˜

ì™¸ë¶€ ëŸ°íƒ€ì„ ë¼ì´ë¸ŒëŸ¬ë¦¬(`dependencies`) ì—†ì´, ê°œë°œì— í•„ìš”í•œ ë„êµ¬(`devDependencies`)ë§Œ ì„¤ì¹˜í•œë‹¤.

```bash
npm install -D typescript @types/node
```

## tsconfig.json ì„¤ì •

CLI ë„êµ¬ ì‹¤í–‰ í™˜ê²½ì— ë§ì¶° ì„¤ì •ì„ ì§„í–‰í•œë‹¤.

```bash
npx tsc --init
```

`dist` í´ë”ë¡œ ë¹Œë“œ ê²°ê³¼ë¬¼ì´ ëª¨ì´ë„ë¡ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.

```json
{
  "compilerOptions": {
    "target": "es2016",
    "module": "commonjs",
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist"]
}
```

<br />
<br />

# CLI ì½”ë“œ ì‘ì„±

ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì“°ì§€ ì•Šìœ¼ë¯€ë¡œ `process.argv`ë¥¼ í†µí•´ ì§ì ‘ ì‚¬ìš©ìì˜ ì…ë ¥ì„ ë°›ì•„ ì²˜ë¦¬í•œë‹¤.

## ì§„ì…ì  íŒŒì¼ ìƒì„± (src/index.ts)

íŒŒì¼ ìµœìƒë‹¨ì˜ **Shebang(`#!/usr/bin/env node`)** ì€ ì´ íŒŒì¼ì´ Node.jsë¡œ ì‹¤í–‰ë˜ì–´ì•¼ í•¨ì„ ìš´ì˜ì²´ì œì— ì•Œë ¤ì£¼ëŠ” í•„ìˆ˜ ìš”ì†Œë‹¤.

```typescript
#!/usr/bin/env node

import fs from 'fs';
import path from 'path';

// ì‚¬ìš©ì ì…ë ¥ ë°›ê¸° (node ëª…ë ¹ì–´ì™€ íŒŒì¼ ê²½ë¡œ ì œì™¸)
const args = process.argv.slice(2);
const currentDir = process.cwd();

async function main() {
  console.log('ğŸš€ Index generator started...');

  // ì˜ˆ: íŠ¹ì • ë””ë ‰í† ë¦¬ ìŠ¤ìº” ë¡œì§
  const targetPath = args[0] ? path.resolve(currentDir, args[0]) : currentDir;

  try {
    if (!fs.existsSync(targetPath)) {
      console.error(`âŒ Error: Directory not found: ${targetPath}`);
      process.exit(1);
    }
    
    // ... ì‹¤ì œ index.ts ìƒì„± ë¡œì§ êµ¬í˜„ ...
    
    console.log(`âœ… Successfully generated index.ts in ${targetPath}`);
  } catch (error) {
    console.error('âŒ An error occurred:', error);
    process.exit(1);
  }
}

main();
```

<br />
<br />

# package.json ì„¤ì • (í•µì‹¬)

CLI ë„êµ¬ ë°°í¬ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ **`bin`** í•„ë“œ ì„¤ì •ì´ë‹¤.

```json
{
  "name": "indexgen-cli",
  "version": "1.0.0",
  "description": "A lightweight CLI tool to generate index.ts files",
  "main": "dist/index.js",
  "bin": {
    "indexgen-cli": "./dist/index.js"
  },
  "files": [
    "dist"
  ],
  "scripts": {
    "build": "tsc",
    "prepublishOnly": "npm run build"
  },
  "keywords": [
    "cli",
    "generator",
    "typescript",
    "automation"
  ],
  "author": "Wonseok Han",
  "license": "MIT",
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
```

### ì£¼ìš” í¬ì¸íŠ¸
- **bin**: `indexgen-cli` ëª…ë ¹ì–´ê°€ ì‹¤í–‰ë  ë•Œ `dist/index.js`ë¥¼ í˜¸ì¶œí•˜ë„ë¡ ì—°ê²°í•œë‹¤.
- **prepublishOnly**: ë°°í¬ ì§ì „ì— ìë™ìœ¼ë¡œ ë¹Œë“œë¥¼ ì‹¤í–‰í•˜ì—¬ ìµœì‹  ì½”ë“œê°€ ë°˜ì˜ë˜ë„ë¡ í•œë‹¤.

<br />
<br />

# ë¡œì»¬ í…ŒìŠ¤íŠ¸ ë° ë°°í¬

## ë¡œì»¬ ë§í¬ (`npm link`)

ë°°í¬ ì „ì— ë‚´ ì»´í“¨í„°ì—ì„œ ë§ˆì¹˜ ì „ì—­ íŒ¨í‚¤ì§€ì²˜ëŸ¼ ì‹¤í–‰í•´ë³¼ ìˆ˜ ìˆë‹¤.

```bash
# 1. ë¹Œë“œ
npm run build

# 2. ë¡œì»¬ ì „ì—­ ì—°ê²°
npm link

# 3. ì‹¤í–‰ í…ŒìŠ¤íŠ¸
indexgen-cli
# ë˜ëŠ” íŠ¹ì • í´ë” ì§€ì •: indexgen-cli ./src

# 4. ì—°ê²° í•´ì œ
npm unlink -g indexgen-cli
```

## npm ë°°í¬í•˜ê¸°

```bash
npm publish
```

ë°°í¬ê°€ ì™„ë£Œë˜ë©´ ì „ ì„¸ê³„ ì–´ë””ì„œë“  ì„¤ì¹˜ ì—†ì´ ë°”ë¡œ ì‹¤í–‰ ê°€ëŠ¥í•˜ë‹¤.

```bash
npx indexgen-cli
```

<br />
<br />

# ë²„ì „ ê´€ë¦¬

ê¸°ëŠ¥ ìˆ˜ì • í›„ì—ëŠ” ë²„ì „ì„ ì˜¬ë¦¬ê³  ì¬ë°°í¬í•´ì•¼ í•œë‹¤.

```bash
# Patch ë²„ì „ ì—… (1.0.0 -> 1.0.1)
npm version patch

# ì¬ë°°í¬
npm publish
```

<br />
<br />

# ë§ˆë¬´ë¦¬

ê±°ì°½í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—†ì´ë„ Node.jsì˜ ê¸°ë³¸ ê¸°ëŠ¥ë§Œìœ¼ë¡œ ì¶©ë¶„íˆ ê°•ë ¥í•œ CLI ë„êµ¬ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ì˜¤íˆë ¤ ì˜ì¡´ì„±ì´ ì—†ì–´ ê´€ë¦¬ê°€ ì‰½ê³  ê°€ë³ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.

ë‚˜ë§Œì˜ ì‘ì€ ë¶ˆí¸í•¨ì„ í•´ê²°í•˜ëŠ” ë„êµ¬ë¥¼ ë§Œë“¤ì–´ npmì— ê³µìœ í•´ë³´ì. ê·¸ ì½”ë“œê°€ ëˆ„êµ°ê°€ì˜ ì‹œê°„ì„ ì ˆì•½í•´ ì¤„ì§€ë„ ëª¨ë¥¸ë‹¤.

<br />
<br />

---

**ì°¸ê³  ìë£Œ**
- [indexgen-cli GitHub Repository](https://github.com/wonseok-han/indexgen-cli)
- [Node.js Docs: process.argv](https://nodejs.org/docs/latest/api/process.html#processargv)
- [npm Docs: package.json](https://docs.npmjs.com/cli/v10/configuring-npm/package-json)
